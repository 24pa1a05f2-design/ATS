<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ATS Resume Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons (Inline SVGs for portability) ---
        const IconWrapper = ({ children, className }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width="24" 
                height="24" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
            >
                {children}
            </svg>
        );

        const FileText = ({ className }) => <IconWrapper className={className}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><line x1="10" x2="8" y1="9" y2="9"/></IconWrapper>;
        const Briefcase = ({ className }) => <IconWrapper className={className}><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></IconWrapper>;
        const Sparkles = ({ className }) => <IconWrapper className={className}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></IconWrapper>;
        const AlertCircle = ({ className }) => <IconWrapper className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></IconWrapper>;
        const CheckCircle = ({ className }) => <IconWrapper className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconWrapper>;
        const Target = ({ className }) => <IconWrapper className={className}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></IconWrapper>;
        const ChevronRight = ({ className }) => <IconWrapper className={className}><path d="m9 18 6-6-6-6"/></IconWrapper>;
        const Loader2 = ({ className }) => <IconWrapper className={className}><path d="M21 12a9 9 0 1 1-6.219-8.56"/></IconWrapper>;
        const BarChart3 = ({ className }) => <IconWrapper className={className}><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></IconWrapper>;
        const RefreshCw = ({ className }) => <IconWrapper className={className}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M3 21v-5h5"/></IconWrapper>;
        const X = ({ className }) => <IconWrapper className={className}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconWrapper>;
        const Plus = ({ className }) => <IconWrapper className={className}><path d="M5 12h14"/><path d="M12 5v14"/></IconWrapper>;
        const Trash2 = ({ className }) => <IconWrapper className={className}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></IconWrapper>;
        const Layout = ({ className }) => <IconWrapper className={className}><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="9" x2="9" y1="21" y2="9"/></IconWrapper>;
        const PenTool = ({ className }) => <IconWrapper className={className}><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></IconWrapper>;
        const Eye = ({ className }) => <IconWrapper className={className}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></IconWrapper>;

        // --- Gemini API Logic ---
        const apiKey = ""; // Runtime environment provides this

        const analyzeWithGemini = async (resumeText, jobDescription) => {
          const prompt = `
            You are an expert ATS (Applicant Tracking System) and Resume Consultant. 
            Analyze the provided Resume against the Job Description.
            
            Resume: "${resumeText.slice(0, 10000)}"
            
            Job Description: "${jobDescription.slice(0, 10000)}"

            Return a strictly valid JSON object (no markdown formatting, just the raw JSON) with this schema:
            {
              "matchScore": <number between 0 and 100>,
              "missingKeywords": [<array of strings, specific hard skills or keywords found in JD but missing in Resume>],
              "foundKeywords": [<array of strings, important keywords present in both>],
              "formattingIssues": [<array of strings, list potential formatting issues like 'columns detected', 'missing headers', etc. If none, empty array>],
              "improvements": [<array of strings, 3 specific actionable tips to improve the resume for this specific role>],
              "executiveSummary": "<string, a 2-sentence summary of the fit>"
            }
          `;

          const payload = {
            contents: [{ parts: [{ text: prompt }] }],
            generationConfig: {
              responseMimeType: "application/json"
            }
          };

          try {
            const response = await fetch(
              `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
              {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
              }
            );

            if (!response.ok) throw new Error(`API Error: ${response.status}`);
            
            const data = await response.json();
            const textResult = data.candidates?.[0]?.content?.parts?.[0]?.text;
            
            if (!textResult) throw new Error("No analysis generated.");
            
            return JSON.parse(textResult);

          } catch (error) {
            console.error("Gemini API Error:", error);
            // Fallback/Simulation for demo purposes if API fails or key is missing
            return {
              matchScore: 0,
              missingKeywords: [],
              foundKeywords: [],
              formattingIssues: [],
              improvements: ["Could not connect to AI. Please try again."],
              executiveSummary: "Error connecting to analysis engine."
            };
          }
        };

        // --- Components ---

        const ScoreGauge = ({ score }) => {
          const circumference = 2 * Math.PI * 40;
          const strokeDashoffset = circumference - (score / 100) * circumference;
          
          let colorClass = "text-red-500";
          if (score >= 70) colorClass = "text-yellow-500";
          if (score >= 85) colorClass = "text-emerald-500";

          return (
            <div className="relative flex items-center justify-center w-32 h-32">
              <svg className="w-full h-full transform -rotate-90">
                <circle
                  cx="64"
                  cy="64"
                  r="40"
                  stroke="currentColor"
                  strokeWidth="8"
                  fill="transparent"
                  className="text-slate-200"
                />
                <circle
                  cx="64"
                  cy="64"
                  r="40"
                  stroke="currentColor"
                  strokeWidth="8"
                  fill="transparent"
                  strokeDasharray={circumference}
                  strokeDashoffset={strokeDashoffset}
                  strokeLinecap="round"
                  className={`transition-all duration-1000 ease-out ${colorClass}`}
                />
              </svg>
              <div className="absolute flex flex-col items-center">
                <span className={`text-3xl font-bold ${colorClass}`}>{score}%</span>
                <span className="text-xs text-slate-500 font-medium">MATCH</span>
              </div>
            </div>
          );
        };

        const KeywordBadge = ({ word, type }) => {
          const bg = type === 'missing' ? 'bg-red-100 text-red-700 border-red-200' : 'bg-emerald-100 text-emerald-700 border-emerald-200';
          const Icon = type === 'missing' ? X : CheckCircle;
          
          return (
            <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-sm font-medium border ${bg} mr-2 mb-2`}>
              <Icon className="w-3 h-3 mr-1.5" />
              {word}
            </span>
          );
        };

        const ResumeBuilder = ({ onUpdate, initialData }) => {
          const [data, setData] = useState(initialData || {
            fullName: '',
            email: '',
            phone: '',
            location: '',
            experience: [{ id: 1, role: '', company: '', duration: '', details: '' }],
            education: [{ id: 1, degree: '', school: '', year: '' }],
            skills: ''
          });

          useEffect(() => {
            let text = `${data.fullName.toUpperCase()}\n`;
            text += `${data.location} | ${data.email} | ${data.phone}\n\n`;
            
            if (data.skills) {
              text += `SKILLS\n${data.skills}\n\n`;
            }

            if (data.experience.length > 0) {
              text += `EXPERIENCE\n`;
              data.experience.forEach(exp => {
                if (exp.role || exp.company) {
                  text += `${exp.role} | ${exp.company} | ${exp.duration}\n`;
                  text += `${exp.details}\n\n`;
                }
              });
            }

            if (data.education.length > 0) {
              text += `EDUCATION\n`;
              data.education.forEach(edu => {
                if (edu.degree || edu.school) {
                  text += `${edu.degree}\n${edu.school} | ${edu.year}\n\n`;
                }
              });
            }

            onUpdate(text);
          }, [data, onUpdate]);

          const updateField = (field, value) => {
            setData(prev => ({ ...prev, [field]: value }));
          };

          const updateArrayItem = (section, id, field, value) => {
            setData(prev => ({
              ...prev,
              [section]: prev[section].map(item => item.id === id ? { ...item, [field]: value } : item)
            }));
          };

          const addItem = (section) => {
            const newItem = section === 'experience' 
              ? { id: Date.now(), role: '', company: '', duration: '', details: '' }
              : { id: Date.now(), degree: '', school: '', year: '' };
            
            setData(prev => ({ ...prev, [section]: [...prev[section], newItem] }));
          };

          const removeItem = (section, id) => {
            setData(prev => ({ ...prev, [section]: prev[section].filter(item => item.id !== id) }));
          };

          return (
            <div className="h-full overflow-y-auto pr-2 space-y-6">
              <div className="space-y-3">
                <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider">Contact Info</h3>
                <input 
                  type="text" 
                  placeholder="Full Name" 
                  className="w-full p-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"
                  value={data.fullName} onChange={e => updateField('fullName', e.target.value)}
                />
                <div className="grid grid-cols-2 gap-2">
                  <input 
                    type="text" placeholder="Email" 
                    className="w-full p-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"
                    value={data.email} onChange={e => updateField('email', e.target.value)}
                  />
                  <input 
                    type="text" placeholder="Phone" 
                    className="w-full p-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"
                    value={data.phone} onChange={e => updateField('phone', e.target.value)}
                  />
                </div>
                <input 
                  type="text" placeholder="Location (City, State)" 
                  className="w-full p-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none"
                  value={data.location} onChange={e => updateField('location', e.target.value)}
                />
              </div>

              <div className="space-y-3">
                <div className="flex justify-between items-center">
                   <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider">Experience</h3>
                   <button onClick={() => addItem('experience')} className="text-xs text-indigo-600 font-medium flex items-center hover:bg-indigo-50 px-2 py-1 rounded">
                     <Plus className="w-3 h-3 mr-1" /> Add
                   </button>
                </div>
                {data.experience.map((exp, idx) => (
                  <div key={exp.id} className="p-3 bg-slate-50 rounded-lg border border-slate-200 relative group">
                    <button onClick={() => removeItem('experience', exp.id)} className="absolute top-2 right-2 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity">
                      <Trash2 className="w-4 h-4" />
                    </button>
                    <div className="grid grid-cols-2 gap-2 mb-2 pr-6">
                      <input 
                        placeholder="Job Title" className="p-2 text-sm border border-slate-200 rounded bg-white"
                        value={exp.role} onChange={e => updateArrayItem('experience', exp.id, 'role', e.target.value)}
                      />
                      <input 
                        placeholder="Company" className="p-2 text-sm border border-slate-200 rounded bg-white"
                        value={exp.company} onChange={e => updateArrayItem('experience', exp.id, 'company', e.target.value)}
                      />
                    </div>
                    <input 
                      placeholder="Duration (e.g. 2020 - Present)" className="w-full p-2 mb-2 text-sm border border-slate-200 rounded bg-white"
                      value={exp.duration} onChange={e => updateArrayItem('experience', exp.id, 'duration', e.target.value)}
                    />
                    <textarea 
                      placeholder="â€¢ Achieved X by doing Y..." className="w-full p-2 text-sm border border-slate-200 rounded bg-white h-20 resize-none"
                      value={exp.details} onChange={e => updateArrayItem('experience', exp.id, 'details', e.target.value)}
                    />
                  </div>
                ))}
              </div>

              <div className="space-y-3">
                <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider">Skills</h3>
                <textarea 
                  placeholder="List your skills separated by commas (e.g. React, Node.js, AWS...)" 
                  className="w-full p-3 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none h-20 resize-none"
                  value={data.skills} onChange={e => updateField('skills', e.target.value)}
                />
              </div>

              <div className="space-y-3">
                <div className="flex justify-between items-center">
                   <h3 className="text-xs font-bold text-slate-400 uppercase tracking-wider">Education</h3>
                   <button onClick={() => addItem('education')} className="text-xs text-indigo-600 font-medium flex items-center hover:bg-indigo-50 px-2 py-1 rounded">
                     <Plus className="w-3 h-3 mr-1" /> Add
                   </button>
                </div>
                {data.education.map((edu, idx) => (
                  <div key={edu.id} className="p-3 bg-slate-50 rounded-lg border border-slate-200 relative group">
                    <button onClick={() => removeItem('education', edu.id)} className="absolute top-2 right-2 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity">
                      <Trash2 className="w-4 h-4" />
                    </button>
                    <input 
                      placeholder="Degree / Major" className="w-full p-2 mb-2 text-sm border border-slate-200 rounded bg-white"
                      value={edu.degree} onChange={e => updateArrayItem('education', edu.id, 'degree', e.target.value)}
                    />
                    <div className="grid grid-cols-2 gap-2">
                      <input 
                        placeholder="University" className="p-2 text-sm border border-slate-200 rounded bg-white"
                        value={edu.school} onChange={e => updateArrayItem('education', edu.id, 'school', e.target.value)}
                      />
                      <input 
                        placeholder="Year" className="p-2 text-sm border border-slate-200 rounded bg-white"
                        value={edu.year} onChange={e => updateArrayItem('education', edu.id, 'year', e.target.value)}
                      />
                    </div>
                  </div>
                ))}
              </div>
            </div>
          );
        };

        const App = () => {
          const [resumeText, setResumeText] = useState('');
          const [jdText, setJdText] = useState('');
          const [isAnalyzing, setIsAnalyzing] = useState(false);
          const [result, setResult] = useState(null);
          const [error, setError] = useState(null);
          const [step, setStep] = useState(1);
          const [inputMode, setInputMode] = useState('text');

          const fillDemoData = () => {
            setResumeText(`JANE DOE
San Francisco, CA | jane@example.com

EXPERIENCE
Frontend Developer | TechCorp | 2020 - Present
- Built responsive web apps using React and Redux.
- Optimized page load times by 40% through code splitting.
- Collaborated with UX designers to implement new features.

EDUCATION
B.S. Computer Science
University of California | 2019`);

            setJdText(`Senior Frontend Engineer
            
We are looking for an experienced engineer to join our team.
Requirements:
- 5+ years of experience with JavaScript, React, and TypeScript.
- Experience with state management (Redux, Context API).
- Strong understanding of CI/CD pipelines and AWS.
- Knowledge of GraphQL is a plus.
- Ability to mentor junior developers.`);
            
            setInputMode('text');
          };

          const handleAnalyze = async () => {
            if (!resumeText.trim() || !jdText.trim()) {
              setError("Please provide both your Resume content and the Job Description.");
              return;
            }
            
            setError(null);
            setIsAnalyzing(true);
            
            try {
              const data = await analyzeWithGemini(resumeText, jdText);
              setResult(data);
              setStep(2);
            } catch (err) {
              setError("Analysis failed. Please try again.");
            } finally {
              setIsAnalyzing(false);
            }
          };

          const reset = () => {
            setStep(1);
            setResult(null);
            setError(null);
          };

          return (
            <div className="min-h-screen bg-slate-50 font-sans text-slate-900 selection:bg-indigo-100 selection:text-indigo-900">
              <header className="bg-white border-b border-slate-200 sticky top-0 z-10">
                <div className="max-w-6xl mx-auto px-4 h-16 flex items-center justify-between">
                  <div className="flex items-center space-x-2">
                    <div className="bg-indigo-600 p-2 rounded-lg">
                      <Target className="w-5 h-5 text-white" />
                    </div>
                    <span className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 to-violet-600">
                      [Hemanth]
                    </span>
                  </div>
                  {step === 2 && (
                     <button 
                       onClick={reset}
                       className="text-sm font-medium text-slate-600 hover:text-indigo-600 flex items-center transition-colors"
                     >
                       <RefreshCw className="w-4 h-4 mr-2" />
                       New Analysis
                     </button>
                  )}
                </div>
              </header>

              <main className="max-w-6xl mx-auto px-4 py-8">
                {step === 1 && (
                  <div className="animate-in fade-in slide-in-from-bottom-4 duration-500">
                    <div className="text-center mb-10">
                      <h1 className="text-4xl font-extrabold text-slate-900 mb-4 tracking-tight">
                        Beat the Resume Robots.
                      </h1>
                      <p className="text-lg text-slate-600 max-w-2xl mx-auto">
                        Build an ATS-friendly resume or paste your existing one. Our AI analyzes keyword gaps and relevance to help you get hired.
                      </p>
                      <button 
                        onClick={fillDemoData}
                        className="mt-4 text-sm text-indigo-600 hover:text-indigo-700 font-medium hover:underline"
                      >
                        Load Sample Data
                      </button>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6">
                      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 flex flex-col h-[600px] overflow-hidden">
                        <div className="px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50">
                          <div className="flex items-center space-x-2 text-indigo-600 font-semibold">
                            <FileText className="w-5 h-5" />
                            <h2>Your Resume</h2>
                          </div>
                          <div className="flex bg-slate-200 rounded-lg p-1">
                            <button
                              onClick={() => setInputMode('text')}
                              className={`px-3 py-1 text-xs font-medium rounded-md transition-all ${
                                inputMode === 'text' 
                                  ? 'bg-white text-indigo-600 shadow-sm' 
                                  : 'text-slate-500 hover:text-slate-700'
                              }`}
                            >
                              Paste Text
                            </button>
                            <button
                              onClick={() => setInputMode('builder')}
                              className={`px-3 py-1 text-xs font-medium rounded-md transition-all flex items-center ${
                                inputMode === 'builder' 
                                  ? 'bg-white text-indigo-600 shadow-sm' 
                                  : 'text-slate-500 hover:text-slate-700'
                              }`}
                            >
                              <PenTool className="w-3 h-3 mr-1" />
                              Visual Builder
                            </button>
                          </div>
                        </div>

                        <div className="flex-1 p-6 overflow-hidden flex flex-col">
                          {inputMode === 'text' ? (
                            <textarea
                              className="flex-1 w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 outline-none resize-none font-mono text-sm text-slate-700 placeholder:text-slate-400"
                              placeholder="Paste your resume content here..."
                              value={resumeText}
                              onChange={(e) => setResumeText(e.target.value)}
                            />
                          ) : (
                            <ResumeBuilder onUpdate={setResumeText} />
                          )}
                        </div>
                        
                        {inputMode === 'builder' && (
                          <div className="px-6 py-3 bg-indigo-50 border-t border-indigo-100 flex items-center justify-between text-xs text-indigo-700">
                            <span className="flex items-center font-medium">
                              <Layout className="w-4 h-4 mr-2" />
                              Auto-formatting for ATS
                            </span>
                            <span className="opacity-75">Changes saved to analysis buffer</span>
                          </div>
                        )}
                      </div>

                      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 flex flex-col h-[600px] overflow-hidden">
                        <div className="px-6 py-4 border-b border-slate-100 flex items-center justify-between bg-slate-50/50">
                          <div className="flex items-center space-x-2 text-emerald-600 font-semibold">
                            <Briefcase className="w-5 h-5" />
                            <h2>Job Description</h2>
                          </div>
                          <span className="text-xs font-medium px-2 py-1 bg-slate-100 rounded text-slate-500">Target Role</span>
                        </div>
                        <div className="flex-1 p-6">
                          <textarea
                            className="w-full h-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none resize-none font-mono text-sm text-slate-700 placeholder:text-slate-400"
                            placeholder="Paste the job description here..."
                            value={jdText}
                            onChange={(e) => setJdText(e.target.value)}
                          />
                        </div>
                      </div>
                    </div>

                    {error && (
                      <div className="mt-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center justify-center">
                        <AlertCircle className="w-5 h-5 mr-2" />
                        {error}
                      </div>
                    )}

                    <div className="mt-8 flex justify-center">
                      <button
                        onClick={handleAnalyze}
                        disabled={isAnalyzing}
                        className={`
                          group relative flex items-center justify-center px-8 py-4 text-lg font-bold text-white transition-all rounded-full shadow-lg
                          ${isAnalyzing 
                            ? 'bg-slate-400 cursor-not-allowed' 
                            : 'bg-indigo-600 hover:bg-indigo-700 hover:shadow-indigo-500/30 hover:-translate-y-1'
                          }
                        `}
                      >
                        {isAnalyzing ? (
                          <>
                            <Loader2 className="w-5 h-5 mr-3 animate-spin" />
                            Analyzing Keywords...
                          </>
                        ) : (
                          <>
                            <Sparkles className="w-5 h-5 mr-2" />
                            Scan Resume
                            <ChevronRight className="w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform" />
                          </>
                        )}
                      </button>
                    </div>
                  </div>
                )}

                {step === 2 && result && (
                  <div className="animate-in fade-in slide-in-from-bottom-8 duration-700 space-y-6">
                    <div className="bg-white rounded-2xl shadow-sm border border-slate-200 p-8">
                      <div className="grid md:grid-cols-3 gap-8 items-center">
                        <div className="flex flex-col items-center justify-center border-r border-slate-100 pr-8">
                          <h3 className="text-slate-500 font-semibold mb-4 uppercase tracking-wider text-xs">ATS Compatibility</h3>
                          <ScoreGauge score={result.matchScore} />
                        </div>

                        <div className="md:col-span-2 space-y-4">
                          <div>
                            <h3 className="text-lg font-bold text-slate-900 mb-2">Executive Summary</h3>
                            <p className="text-slate-600 leading-relaxed">
                              {result.executiveSummary}
                            </p>
                          </div>
                          
                          {result.formattingIssues.length > 0 && (
                            <div className="bg-amber-50 border border-amber-100 rounded-lg p-4">
                              <div className="flex items-start">
                                <AlertCircle className="w-5 h-5 text-amber-600 mt-0.5 mr-3 flex-shrink-0" />
                                <div>
                                  <h4 className="font-semibold text-amber-800 text-sm">Formatting Attention Needed</h4>
                                  <ul className="mt-1 space-y-1">
                                    {result.formattingIssues.map((issue, idx) => (
                                      <li key={idx} className="text-amber-700 text-sm flex items-center">
                                        <span className="w-1.5 h-1.5 bg-amber-400 rounded-full mr-2"></span>
                                        {issue}
                                      </li>
                                    ))}
                                  </ul>
                                </div>
                              </div>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>

                    <div className="grid md:grid-cols-2 gap-6">
                      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col">
                        <div className="px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center">
                          <h3 className="font-bold text-slate-800 flex items-center">
                            <Target className="w-5 h-5 mr-2 text-indigo-500" />
                            Keyword Analysis
                          </h3>
                          <span className="text-xs bg-slate-200 text-slate-600 px-2 py-1 rounded">
                            {result.missingKeywords.length} Missing
                          </span>
                        </div>
                        
                        <div className="p-6 flex-1">
                          <div className="mb-6">
                            <h4 className="text-sm font-semibold text-red-600 mb-3 uppercase tracking-wide">Critical Missing Keywords</h4>
                            <div className="flex flex-wrap">
                              {result.missingKeywords.length > 0 ? (
                                result.missingKeywords.map((word, i) => (
                                  <KeywordBadge key={i} word={word} type="missing" />
                                ))
                              ) : (
                                <p className="text-sm text-slate-500 italic">Great job! No critical keywords missing.</p>
                              )}
                            </div>
                          </div>

                          <div>
                            <h4 className="text-sm font-semibold text-emerald-600 mb-3 uppercase tracking-wide">Matches Found</h4>
                            <div className="flex flex-wrap">
                              {result.foundKeywords.length > 0 ? (
                                result.foundKeywords.map((word, i) => (
                                  <KeywordBadge key={i} word={word} type="found" />
                                ))
                              ) : (
                                <p className="text-sm text-slate-500 italic">No strong matches found.</p>
                              )}
                            </div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden flex flex-col">
                        <div className="px-6 py-4 border-b border-slate-100 bg-slate-50/50">
                          <h3 className="font-bold text-slate-800 flex items-center">
                            <BarChart3 className="w-5 h-5 mr-2 text-indigo-500" />
                            AI Recommendations
                          </h3>
                        </div>
                        <div className="p-6">
                          <ul className="space-y-4">
                            {result.improvements.map((tip, idx) => (
                              <li key={idx} className="flex items-start group">
                                <div className="flex-shrink-0 w-8 h-8 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center font-bold text-sm mr-4 border border-indigo-100 group-hover:bg-indigo-100 transition-colors">
                                  {idx + 1}
                                </div>
                                <p className="text-slate-600 text-sm leading-relaxed mt-1">
                                  {tip}
                                </p>
                              </li>
                            ))}
                          </ul>
                          
                          <div className="mt-8 pt-6 border-t border-slate-100">
                             <div className="bg-indigo-50 rounded-lg p-4 flex items-center justify-between">
                               <div>
                                 <p className="text-indigo-900 font-semibold text-sm">Need to tailor your resume?</p>
                                 <p className="text-indigo-700 text-xs mt-0.5">Focus on integrating the red keywords above.</p>
                               </div>
                               <Briefcase className="w-8 h-8 text-indigo-200" />
                             </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                )}
              </main>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
